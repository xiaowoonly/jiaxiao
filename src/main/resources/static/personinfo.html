<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>信息</title>
		<script type="text/javascript" src="js/jquery-3.3.1.min.js"></script>
		<link href="css/person_info.css" rel="stylesheet" type="text/css" />
		<script type="text/javascript" src="js/jquery-3.3.1.min.js"></script>

	</head>
	<body>
		<div class="t-top"><!--头部-->
            <a href="person.html"><img src="images/icon_return.png"></a>
            <div onMouseOut="$('#t-nav').hide();" onMouseOver="$('#t-nav').show();">
		   	<span>个人信息</span>
		   	</div>
		   	
		</div><!--头部-->


		<div class="t-main1">
			<span>基本信息</span>
			<div class="t-main1-list" >
				<label>姓名：</label><input id="parentName" type="text" class="name-input" />
			</div>
			<div class="t-main1-list" style="padding-top: 20px;">
				<label>联系电话：</label><input  id="parentPhone" type="text" class="name-input" readonly style="margin-left: 1px;" />
			</div>
		</div>

		<div class="t-main1">
			<span>学生信息</span>
			<div class="t-main1-list" >
				<label>姓名：</label><input id="stuName" type="text" readonly class="name-input" />
			</div>
			<div class="t-main1-list" style="padding-top: 20px;">
				<label>学号：</label><input id="stuNo" type="text" readonly class="name-input" style="margin-left: 1px;" />
			</div>

			<div class="t-main1-list" style="padding-top: 20px;">
				<label>性别：</label><input id="stuGender" type="text" readonly class="name-input" style="margin-left: 1px;" />
			</div>


			<div class="t-main1-list" style="padding-top: 20px;">
				<label>联系电话：</label><input id="stuPhone" type="text" readonly class="name-input" style="margin-left: 1px;" />
			</div>

			<div class="t-main1-list" style="padding-top: 20px;">
				<label>家庭住址：</label><input id="stuAddress" type="text" readonly class="name-input" style="margin-left: 1px;" />
			</div>
		</div>

		<a href=""><div class="subbtn" onclick="updateInfo()">提交</div></a>
	</body>

<script>
	$(function(){

		var username = sessionStorage.getItem("username");
		var type  = sessionStorage.getItem("type");
		alert(type);
		var adress ;
		var params ={};
		params.username = username;
		params.type = type;

		if(type==2){
			adress="/user/studentInfo";
		}else{
			adress="/user/teacherInfo";
		}
		$.ajax({
			url: adress,
			type: 'POST',
			dataType: "json",
			contentType: 'application/json',
			data: JSON.stringify(params),
			success: function (data) {
				var json =eval(data);
				if(type==1){
					document.getElementById('parentName').value=json[0].realname;
					document.getElementById('parentPhone').value=json[0].username;
				}else{
					document.getElementById('stuName').value=json[0].name;
					document.getElementById('stuNo').value=json[0].number;
					document.getElementById('stuGender').value=json[0].gender;
					document.getElementById('stuAddress').value=json[0].address;
					document.getElementById('stuPhone').value=json[0].phone;
					document.getElementById('parentName').value=json[0].parentName;
					document.getElementById('parentPhone').value=json[0].parentPhone;
				}
			},
			error: function (data) {
			}
		});
	});
	function updateInfo(){
		var name =	document.getElementById('stuName').value;
		var gender =	document.getElementById('stuGender').value;
		var address =	document.getElementById('stuAddress').value;
		var phone =	document.getElementById('stuPhone').value;
		var parentName =	document.getElementById('parentName').value;
		var parentPhone =	document.getElementById('parentPhone').value;
		var params ={};
		params.name = name;
		params.gender = gender;
		params.address = address;
		params.phone = phone;
		params.parentName = parentName;
		params.parentGender = parentGender;
		params.parentPhone = parentPhone;

		$.ajax({
			url: "/user/studentInfo",
			type: 'POST',
			dataType: "json",
			contentType: 'application/json',
			data: JSON.stringify(params),
			success: function (data) {
			},
			error: function (data) {
			}
		});

	}
</script>
</html>
