<!doctype html>
<html>
<head>
    <title>家校联系平台</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no" />
    <meta name="apple-mobile-web-app-capable" content="yes" />

    <link rel="stylesheet" type="text/css" href="css/global.css" />
    <script src="js/register.js" type="text/javascript"></script>
    <script type="text/javascript" src="js/jquery-3.3.1.min.js"></script>
    <link href="css/register.css" rel="stylesheet" type="text/css" />
</head>

<body>

<div>

    <form id="formRegister" action="">

        <header id="title">

            <div class="back"  onclick="location.href='person.html'">

            </div>

            修改密码

        </header>

        <section id="register">

            <div>

            <span>

                <img src="images/icon_password.png" width="24" height="24" alt="密码图标"></span><input

                    id="txt_Pwd" name="txt_Pwd" type="password" placeholder="新密码（6～16个字符）"></div>

            <div>

            <span>

                <img src="images/icon_password.png" width="24" height="24" alt="密码图标"></span><input

                    id="txt_PwdTwo" name="txt_PwdTwo" type="password" placeholder="再次新输入密码"></div>

            <a id="asubmit" class="btn"  onclick=update() >确定修改</a>

        </section>

    </form>



</div>

<footer>

    <p>

        &copy;何瑞毕业设计</p>

</footer>
</body>
<script>
function update(){
    var username = sessionStorage.getItem("username");
    var newPwd = document.getElementById("txt_Pwd").value;
    var newPwd2 = document.getElementById("txt_PwdTwo").value;
    if(newPwd!==newPwd2){
        alert("原密码不一致");
        return false;
    }
    var params ={};
    params.username = username;
    params.password = newPwd;
    $.ajax({
        url: "/user/updatePwd",
        type: 'POST',
        dataType: "json",
        contentType: 'application/json',
        data: JSON.stringify(params),
        success: function (data) {
            if(data===0) {
                alert("修改成功");
                window.location.href='home.html';
            }
            else{
                alert("修改失败");
            }
        },
        error: function (data) {
        }
    });

}
</script>
</html>